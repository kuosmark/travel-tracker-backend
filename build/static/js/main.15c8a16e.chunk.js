(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e,t,a){e.exports=a(450)},448:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),o=a.n(s),c=a(15),i=a.n(c),u=a(17),l=a(216),p=a(59),m=a(60),d=a(63),f=a(61),h=a(64),g=a(109),w=a(464),v=a(451),b=a(472),E=a(466),y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this))).handleDismiss=function(){a.setState({visible:!1}),setTimeout(function(){a.setState({visible:!0})},2e3)},a.state={name:e.name,visible:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e="Welcome ".concat(this.state.name);if(this.state.visible)return r.a.createElement(E.a,{floating:!0,compact:!0,onDismiss:this.handleDismiss,header:e,content:"This is a special notification which you can dismiss."})}}]),t}(n.Component),k={width:"auto",height:"auto"},O={modal:{marginTop:"-250px",display:"fixed !important"}},x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).onMarkerClick=function(e,t,n){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0,modalOpen:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onMapClicked=function(e,t,n){var r=n.latLng,s=r.lat(),o=r.lng();a.setState({markers:a.state.markers.concat({title:"T\xe4ss\xe4 on nuppi!",name:"T\xe4h\xe4n tulee vaikka mink\xe4laista teksti\xe4",position:{lat:s,lng:o}})})},a.renderMarkers=function(){return a.state.markers.map(function(e){return r.a.createElement(g.Marker,{name:e.name,position:e.position,onClick:a.onMarkerClick})})},a.handleOpen=function(){return a.setState({modalOpen:!0})},a.handleClose=function(){return a.setState({modalOpen:!1})},a.state={user:a.props.user,showingInfoWindow:!1,activeMarker:{},selectedPlace:{},modalOpen:!1,markers:[{title:"T\xe4ss\xe4 on nuppi",name:"The marker`s title will appear as a tooltip.",position:{lat:37.778519,lng:-122.40564}}]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w.a,{open:this.state.modalOpen,onClose:this.handleClose,style:O.modal,closeIcon:!0}," ",r.a.createElement(w.a.Header,null,"Select a Photo"),r.a.createElement(w.a.Content,{image:!0},r.a.createElement(v.a,{wrapped:!0,size:"medium",src:"https://react.semantic-ui.com/images/avatar/large/rachel.png"}),r.a.createElement(w.a.Description,null,r.a.createElement(b.a,null,"Owner: ",this.state.user.username),r.a.createElement("p",null,"We've found the following gravatar image associated with your e-mail address."),r.a.createElement("p",null,"Is it okay to use this photo?")))),r.a.createElement(g.Map,{google:this.props.google,zoom:2,style:k,initialCenter:{lat:0,lng:0},onClick:this.onMapClicked},r.a.createElement(y,{name:this.state.user.username}),this.renderMarkers()))}}]),t}(n.Component),C=Object(g.GoogleApiWrapper)(function(e){return{apiKey:e.apiKey,language:e.language}})(x),S=a(471),j=a(469),P=a(470),I=a(459),A=a(462),T=a(467),M=a(34),U=a.n(M),z=(a(468),a(460)),W=(a(461),r.a.createElement(I.a,null),a(473)),D=(a(465),a(108)),L=a(463),G=a(474),J=function(e){var t=e.onSubmit,a=e.handleChange,n=e.username,s=e.password;return r.a.createElement("div",{className:"login-form"},r.a.createElement("style",null,"\n      body > div,\n      body > div > div,\n      body > div > div > div.login-form {\n        height: 100%;\n      }\n    "),r.a.createElement(W.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(W.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a,{as:"h2",color:"blue",textAlign:"center"},r.a.createElement(D.a,{name:"plane"})," Log in to account"),r.a.createElement(L.a,{onSubmit:t,size:"large"},r.a.createElement(G.a,null,r.a.createElement(L.a.Input,{fluid:!0,icon:"user",name:"username",iconPosition:"left",placeholder:"Username",value:n,onChange:a}),r.a.createElement(L.a.Input,{fluid:!0,icon:"lock",name:"password",iconPosition:"left",placeholder:"Password",type:"password",value:s,onChange:a}),r.a.createElement(T.a,{color:"blue",fluid:!0,size:"large",type:"submit"},"Login"))),r.a.createElement(E.a,null,r.a.createElement(z.a,{to:"/create"},"Create Account")))))},N=function(e){var t=e.onSubmit,a=e.handleChange,n=e.username,s=e.password,o=e.password2;return r.a.createElement("div",{className:"login-form"},r.a.createElement("style",null,"\n      body > div,\n      body > div > div,\n      body > div > div > div.login-form {\n        height: 100%;\n      }\n    "),r.a.createElement(W.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(W.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a,{as:"h2",color:"blue",textAlign:"center"},r.a.createElement(D.a,{name:"user circle"})," Create new account"),r.a.createElement(L.a,{onSubmit:t,size:"large"},r.a.createElement(G.a,null,r.a.createElement(L.a.Input,{fluid:!0,icon:"user",name:"newUsername",iconPosition:"left",placeholder:"Username",value:n,onChange:a}),r.a.createElement(L.a.Input,{fluid:!0,icon:"lock",name:"newPassword",iconPosition:"left",placeholder:"Password",type:"password",value:s,onChange:a}),r.a.createElement(L.a.Input,{fluid:!0,icon:"lock",name:"newPassword2",iconPosition:"left",placeholder:"Repeat password",type:"password",value:o,onChange:a}),r.a.createElement(T.a,{color:"blue",fluid:!0,size:"large",type:"submit"},"Submit"))),r.a.createElement(E.a,null,r.a.createElement(z.a,{to:"/login"},"Login to account")))))},F=null,K={getAll:function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:F}},e.next=3,U.a.post("/api/blogs",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(i.a.mark(function e(t,a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.put("".concat("/api/blogs","/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:F}},e.next=3,U.a.delete("".concat("/api/blogs","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){F="bearer ".concat(e)}},H={login:function(){var e=Object(u.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},R={getAll:function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=U.a.post("/api/users",t),e.abrupt("return",a.data);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(i.a.mark(function e(t,a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.put("".concat("/api/users","/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.delete("".concat("/api/users","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},q=function(e){var t=e.message,a=e.color;return t?r.a.createElement(E.a,{icon:"warning sign",size:"big",color:a,header:"Warning!",content:t,warning:!0}):null},B=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,username:"",newUsername:"",newPassword:"",newPassword2:"",password:"",color:"",message:""},a.handleFieldChange=function(e){console.log(e.target.value),a.setState(Object(l.a)({},e.target.name,e.target.value))},a.componentDidMount=Object(u.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=window.localStorage.getItem("loggedInUser"))&&(n=JSON.parse(t),a.setState({user:n}),K.setToken(n.token));case 2:case"end":return e.stop()}},e,this)})),a.logout=function(){K.setToken(null),window.localStorage.removeItem("loggedInUser"),a.notify("".concat(a.state.user.username," logged out succesfully!"),"green"),a.setState({user:null}),console.log("hoidettu")},a.notify=function(e,t){a.setState({message:e,color:t}),setTimeout(function(){a.setState({message:null,color:null})},2e3)},a.login=function(){var e=Object(u.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,H.login({username:a.state.username,password:a.state.password});case 4:n=e.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(n)),K.setToken(n.token),a.setState({username:"",password:"",user:n}),a.notify("".concat(a.state.user.username," logged in succesfully!"),"green"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),a.notify("invalid username or password, try again!","red"),a.setState({username:"",password:""});case 16:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),a.register=function(){var e=Object(u.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(n=a.state.newPassword)!==a.state.newPassword2?a.notify("Passwords don't match!","red"):n.length<3?a.notify("Password must be at least 3 characters long!","red"):a.createAccount();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.createAccount=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.create({username:a.state.newUsername,password:a.state.newPassword});case 3:e.sent,a.notify("account ".concat(a.state.newUsername," created!"),"green"),a.setState({newUsername:"",newPassword:"",newPassword2:""}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),a.notify("server error!","red");case 12:case"end":return e.stop()}},e,this,[[0,8]])})),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;console.log("THE USER IS",this.state.user);var t=null!==this.state.user;return r.a.createElement(S.a,null,r.a.createElement(I.a,null,r.a.createElement(A.a,{hidden:!0}),r.a.createElement(q,{message:this.state.message,color:this.state.color}),r.a.createElement(j.a,{exact:!0,path:"/",render:t?function(){return r.a.createElement(P.a,{to:"/map"})}:function(){return r.a.createElement(P.a,{to:"/login"})}}),r.a.createElement(j.a,{path:"/login",render:t?function(){return r.a.createElement(P.a,{to:"/map"})}:function(){return r.a.createElement(J,{onSubmit:e.login,handleChange:e.handleFieldChange,username:e.state.username,password:e.state.password})}}),r.a.createElement(j.a,{path:"/create",render:t?function(){return r.a.createElement(P.a,{to:"/map"})}:function(){return r.a.createElement(N,{onSubmit:e.register,handleChange:e.handleFieldChange,username:e.state.newUsername,password:e.state.newPassword,password2:e.state.newPassword2})}}),r.a.createElement(j.a,{path:"/map",render:t?function(){return r.a.createElement(Q,{user:e.state.user,action:e.logout})}:function(){return r.a.createElement(P.a,{to:"/"})}})))}}]),t}(n.Component),Q=function(e){var t=e.user,a=e.action;return r.a.createElement("div",null,r.a.createElement(T.a,{onClick:a},"Log out"),r.a.createElement(C,{user:t,apiKey:"AIzaSyCy6G0q6EnGtGPGAAvLlC37STQU4Med0xE",language:"en"}))},V=B;a(448);o.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[248,2,1]]]);
//# sourceMappingURL=main.15c8a16e.chunk.js.map